import{V as o}from"./BJ_zhDFh.js";const s=o("cartStore",{state:()=>({cart:[],order:{form:{fullName:"",address:"",deliveryDate:"",email:"",phone:"",additionalInfo:"",acceptTerms:!1},orderNumber:null}}),actions:{loadCartFromStorage(){if(typeof window<"u"){const t=localStorage.getItem("cart");t&&(this.cart=JSON.parse(t))}},addProductToCart(t){const r=this.cart.find(e=>e.id===t.id);r?r.quantity+=1:this.cart.push({...t,quantity:1}),this.saveCartToStorage()},updateQuantity(t,r){const e=this.cart.find(a=>a.id===t);e&&(r>0?e.quantity=r:this.removeProductFromCart(t),this.saveCartToStorage())},removeProductFromCart(t){this.cart=this.cart.filter(r=>r.id!==t),this.saveCartToStorage()},clearCart(){this.cart=[],this.saveCartToStorage()},saveCartToStorage(){typeof window<"u"&&localStorage.setItem("cart",JSON.stringify(this.cart))},updateOrderForm(t,r){this.order.form[t]=r},generateOrderNumber(){const t=Date.now(),r=Math.floor(Math.random()*1e4);this.order.orderNumber=`ORD-${t}-${r}`},saveOrder(){this.generateOrderNumber();const t={...this.order.form,orderNumber:this.order.orderNumber,cart:this.cart,total:this.cart.reduce((r,e)=>r+e.price*e.quantity,0).toFixed(2)};return localStorage.setItem("orderData",JSON.stringify(t)),t},clearOrderAndCart(){this.cart=[],this.order={form:{fullName:"",address:"",deliveryDate:"",email:"",phone:"",additionalInfo:"",acceptTerms:!1},orderNumber:null},this.saveCartToStorage()}},getters:{getCartWithDetails:t=>t.cart,getCartTotal:t=>t.cart.reduce((r,e)=>r+e.price*e.quantity,0)}});export{s as u};
